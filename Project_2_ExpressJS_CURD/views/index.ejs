<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
        integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        body {
            margin: 0%;
        }

        button {
            cursor: pointer;
        }

        /* .book {
            display: none;
            margin: 10px;
            padding: 10px;
            background: lightgray;
            border-radius: 5px;
        } */

        .nav_btn {
            padding-top: 20px;
            padding-bottom: 20px;
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;

            button {
                height: 45px;
                padding: 0px 20px;
                background-color: gray;
                color: white;
                border: none;
                cursor: pointer;
                border-radius: 5px;
                font-size: 18px;
                opacity: 65%;
            }

            button:hover {
                background-color: #0056b3;
                opacity: 100%;
            }

            button.active {
                background-color: blue;
                color: white;
                border: 1px solid blue;
                opacity: 100%;
            }
        }

        .book_product {
            width: 90%;
            height: fit-content;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 50px;

            .new_book_add {
                height: 550px;
                width: 300px;
                border-radius: 5px;
                border: 2px solid #007bff;
                /* border: 2px solid rgb(182, 180, 180); */
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;

                h1 {
                    color: #007bff;

                    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                }

                button {
                    height: 100px;
                    width: 100px;
                    font-size: 50px;
                    background-color: #007bff;
                    color: white;
                    border: none;
                    border-radius: 50%;
                    transition: background-color 0.3s ease, transform 0.3s ease;
                }

                button:hover {
                    background-color: #0056b3;
                    transform: scale(1.1);
                }
            }

            .book_main {
                height: 550px;
                width: 300px;
                border-radius: 5px;
                border: 1px solid rgb(182, 180, 180);
                overflow: hidden;
                /* padding: 10px; */
                /* overflow: hidden; */

                .book_img {
                    height: 65%;
                    width: 100%;
                    overflow: hidden;
                    background-color: black;

                    img {
                        height: 100%;
                        width: 100%;
                        transition: 1s ease-in-out;
                    }

                    .book_edit_delete {
                        display: none;
                        position: absolute;
                        gap: 20px;
                        margin-top: 230px;
                        margin-left: 240px;
                        z-index: 10;

                        button {
                            height: 45px;
                            padding: 0px 10px;
                            border: 2px solid;
                            background: none;
                            border-radius: 5px;
                            font-size: 20px;
                            color: white;
                            transition: 0.5s ease-in-out;
                        }

                        .edit_book_icon:hover {
                            background-color: green;
                            border: none;
                            transition: 0.5s;
                        }

                        .delete_book_icon:hover {
                            background-color: rgb(255, 128, 0);
                            border: none;
                            transition: 0.5s;
                        }
                    }
                }

                .book_text {
                    height: 35%;
                    /* width: 98%; */

                    h2 {
                        /* text-align: left; */
                        padding-left: 5px;
                    }

                    .book_author {
                        width: 95%;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-top: -30px;

                        p {
                            color: gray;
                            font-size: 15px;
                            /* letter-spacing: 1px; */
                            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                        }
                    }

                    .book_flex {
                        margin-top: -30px;
                        width: 95%;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;

                        h3 {
                            color: green;
                            font-size: 22px;
                        }
                    }

                    .star_rating {
                        display: flex;
                        gap: 2px;

                        .fa-star {
                            font-size: 18px;
                            color: lightgray;
                        }

                        .fa-star.filled {
                            color: gold;
                        }
                    }

                    button {
                        height: 45px;
                        padding: 0px 20px;
                        border: none;
                        border-radius: 5px;
                        background-color: rgb(255, 0, 111);
                        color: white;
                        font-size: 18px;
                        transition: 1s ease-in-out;
                    }

                    button:hover {
                        color: rgb(255, 0, 111);
                        border: 2px solid rgb(255, 0, 111);
                        background: none;
                        transition: 1s;
                    }
                }
            }

            .book_main:hover {
                .book_img {
                    img {
                        transform: scale(1.1);
                        transition: 1s;
                        opacity: 50%;
                    }

                    .book_edit_delete {
                        display: block;
                        display: flex;
                        flex-direction: column;
                        justify-content: flex-end;
                        align-items: flex-end;
                    }
                }

                .book_text button {
                    color: rgb(255, 0, 111);
                    border: 2px solid rgb(255, 0, 111);
                    background: none;
                    transition: 1s;
                }
            }
        }

        .main_add_book {
            position: fixed;
            top: 0%;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            /* background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)); */

            form {
                z-index: 100;
                /* background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)); */
                background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://i.pinimg.com/originals/5c/37/14/5c3714cba608140b1d6c15ce3f699068.gif');
                background-size: 100% 100%;
                background-position: center;
                background-repeat: no-repeat;
                padding: 30px;
                padding-top: 0px;
                width: 630px;
                height: fit-content;
                border-radius: 10px;
                color: white;

                h1 {
                    font-size: 50px;
                    background: linear-gradient(45deg, #ff0066, #ffcc00, #00ffcc);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                }

                h3 {
                    text-align: left;
                    margin-top: 25px;
                }

                input {
                    width: 100%;
                    height: 35px;
                }

                select{
                    width: 100%;
                    height: 40px;
                }

                .main_add_data_first {
                    width: 90%;
                }

                .file_input {
                    height: 40px;
                    width: 101%;
                    font-size: 14px;
                    color: inherit;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    overflow: hidden;
                    background-color: rgb(255, 255, 255);
                    color: black;
                }

                .file_input::-webkit-file-upload-button {
                    height: 100%;
                    border: none;
                    padding: 0px 15px;
                    background-color: #0056b3;
                    color: white;
                }

                .add_book_flex {
                    width: 90%;
                    display: flex;
                    gap: 20px;
                    justify-content: center;
                    align-items: center;

                    .main_add_data_sec {
                        width: 50%;
                    }

                    .main_add_data_third {
                        width: 33%;
                    }
                }

                .rating-system {
                    display: flex;
                    gap: 10px;
                }

                .rating-system .fa-star {
                    font-size: 26px;
                    cursor: pointer;
                    color: rgb(214, 211, 211);
                    transition: color 0.3s;
                }

                .rating-system .fa-star.gold {
                    color: gold;
                }

                .book_add_btn_flex {
                    width: 90%;
                    margin-top: 20px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;

                    button,
                    div {
                        height: 45px;
                        padding: 0px 20px;
                        font-size: 20px;
                        border: none;
                        background: none;
                        border-radius: 5px;
                        color: white;
                        transition: 1s ease-in-out;
                        cursor: pointer;
                    }

                    button {
                        background-color: green;
                    }

                    div {
                        background-color: red;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        font-size: 25px;
                    }

                    button:hover {
                        background: none;
                        border: 2px solid green;
                        color: green;
                        transition: 1s;
                    }

                    div:hover {
                        background: none;
                        border: 2px solid red;
                        color: red;
                        transition: 1s;
                    }
                }
            }
        }

        .cart_open_btn {
            position: fixed;
            top: 0%;
            right: 0%;
            margin: 10px;
            height: 45px;
            padding: 0px 10px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            font-size: 25px;
            transition: 1s ease-in-out;
        }

        .cart_open_btn:hover {
            background-color: #0056b3;
            transform: scale(1.1);
            transition: 1s;
        }

        .cart_main {
            visibility: hidden;
            transition: 1s ease-in-out;
            width: 0%;
            height: 100%;
            position: fixed;
            top: 0%;
            right: 0%;
            background-color: black;

            .cart_div {
                width: 450px;
                height: 100%;
                /* border: 2px solid red; */

                .cart_btn_div {
                    width: 100%;
                    display: flex;
                    justify-content: flex-end;
                    align-items: center;
                }
            }

            @media screen and (min-width: 0px) and (max-width: 1500px) {
                .cart_div {
                    width: 100%;
                    height: 100%;
                    /* border: 2px solid red; */
                }
            }
        }

        .cart_close_btn {
            margin-top: 10px;
            margin-right: 10px;
            background: none;
            border: none;
            font-size: 30px;
            color: white;
        }

        .add_cart_main {
            display: flex;
            flex-direction: column;
            /* border: 2px solid red; */
            height: 100%;

            .add_to_cart {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                height: 150px;
                width: 100%;
                overflow: hidden;
                margin-top: 10px;
                border: 1px solid rgb(82, 81, 81);
                padding-top: 10px;
                padding-bottom: 10px;
                border-radius: 5px;

                .cart_img {
                    /* border: 2px solid; */
                    height: 100%;
                    width: 20%;
                    overflow: hidden;

                    img {
                        height: 100%;
                        width: 100%;
                    }

                    .quantity_div {
                        text-align: left;

                        button {
                            position: absolute;
                            margin-top: -7px;
                            margin-left: -7px;
                            height: 30px;
                            width: 30px;
                            border-radius: 50%;
                            border: none;
                            background-color: rgb(255, 0, 111);
                            color: white;
                        }
                    }
                }

                .cart_text {
                    /* border: 2px solid; */
                    height: 100%;
                    width: 50%;
                    color: white;
                    text-align: left;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    /* align-items: center; */

                    h2 {
                        margin-top: -0px;
                    }

                    p {
                        margin-top: -20px;
                        font-family: 20px;
                        color: gray;
                        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    }

                    h3 {
                        margin-top: -10px;
                        color: rgb(255, 0, 111);
                    }

                    .fa-star {
                        margin-top: -50px;
                    }

                    .fa-star.filled {
                        margin-top: -50px;
                        color: gold;
                    }
                }

                .cart_action {
                    border: 2px solid;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    flex-direction: column;
                    gap: 20px;
                    height: 100%;
                    width: 20%;

                    a {
                        /* border: 2px solid red; */
                        width: 100%;
                    }

                    button {
                        height: 45px;
                        width: 90%;
                        border: none;
                        border-radius: 5px;
                        color: white;
                        transition: 1s ease-in-out;
                        font-size: 18px;
                    }

                    .edit_cart {
                        background-color: green;
                    }

                    .delete_cart {
                        background-color: rgb(255, 128, 0);
                    }

                    .edit_cart:hover {
                        background: none;
                        color: green;
                        border: 2px solid green;
                        transition: 1s;
                    }

                    .delete_cart:hover {
                        background: none;
                        color: rgb(255, 128, 0);
                        border: 2px solid rgb(255, 128, 0);
                        transition: 1s;
                    }
                }
            }
        }

        .cart_edit_main {
            position: fixed;
            top: 0%;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3));

            form {
                width: 400px;
                padding-bottom: 30px;
                border-radius: 10px;
                background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6));
                color: white;

                h1 {
                    color: rgb(255, 0, 111);
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                }

                h2 {
                    width: 60%;
                    text-align: left;
                }

                input {
                    width: 55%;
                    height: 35px;
                    padding-left: 15px;
                    border: none;
                }

                .rating {
                    display: flex;
                    gap: 16px;
                    justify-content: center;
                    align-items: center;
                }

                .rating .fa-star {
                    font-size: 30px;
                    color: #ccc;
                    cursor: pointer;
                    transition: color 0.3s ease;
                }

                .rating .fa-star.gold {
                    color: #ffc107;
                }


                button {
                    margin-top: 30px;
                    height: 45px;
                    padding: 0px 20px;
                    font-size: 18px;
                    background-color: green;
                    color: white;
                    border: none;
                    border-radius: 5px;
                }
            }
        }
    </style>
</head>

<body>
    <center>
        <h3></h3>
        <div class="nav_btn">
            <button class="active" onclick="filterBooks('all', this)">All</button>
            <button onclick="filterBooks('fiction', this)">Fiction</button>
            <button onclick="filterBooks('children', this)">Children's Books</button>
            <button onclick="filterBooks('thriller', this)">Thriller/Mystery</button>
            <button onclick="filterBooks('romance', this)">Romance</button>
        </div>

        <br>

        <div class="book_product">
            <div class="new_book_add">
                <button class="add_book_btn">
                    <i class="fa-solid fa-plus"></i>
                </button>

                <h1>Add Your New Book</h1>
            </div>

            <div class="main_add_book" style="display: none;">
                <form action="/bookAdd" method="post">
                    <h1>Add Your Book</h1>
                    <input hidden type="text" name="quantity" value="1">

                    <div class="add_book_flex">
                        <div class="main_add_data_sec">
                            <h3>Image</h3>
                            <input required type="text" placeholder="Book Image..." name="img">
                        </div>

                        <div class="main_add_data_sec">
                            <h3>Category</h3>
                            <select required name="category" id="">
                                <option value="">Select Category</option>
                                <option value="fiction">Fiction</option>
                                <option value="children">Children's Books</option>
                                <option value="thriller">Thriller/Mystery</option>
                                <option value="romance">Romance</option>
                            </select>
                        </div>
                    </div>

                    <div class="main_add_data_first">
                        <h3>Book</h3>
                        <input required type="file" name="pdf" class="file_input">
                    </div>

                    <div class="add_book_flex">
                        <div class="main_add_data_sec">
                            <h3>Book Name</h3>
                            <input required type="text" placeholder="Book Name..." name="name">
                        </div>

                        <div class="main_add_data_sec">
                            <h3>Author Name</h3>
                            <input required type="text" placeholder="Author Name..." name="author">
                        </div>
                    </div>


                    <div class="add_book_flex">
                        <div class="main_add_data_third">
                            <h3>Book Price</h3>
                            <input required type="price" placeholder="Price..." name="price">
                        </div>

                        <div class="main_add_data_third">
                            <h3>Released Date</h3>
                            <input required type="date" placeholder="Released Date..." name="date">
                        </div>

                        <!-- <div class="main_add_data_third">
                            <h3>Rating System</h3>
                            <input type="number" placeholder="Rate..." name="rate">
                        </div> -->

                        <div class="main_add_data_third">
                            <h3>Rating System</h3>
                            <div class="rating-system">
                                <i class="fa fa-star" data-value="1"></i>
                                <i class="fa fa-star" data-value="2"></i>
                                <i class="fa fa-star" data-value="3"></i>
                                <i class="fa fa-star" data-value="4"></i>
                                <i class="fa fa-star" data-value="5"></i>
                            </div>
                            <input type="hidden" name="rate" id="rating-value">
                        </div>

                    </div>

                    <br>
                    <div class="book_add_btn_flex">
                        <button type="submit">Add Book</button>
                        <div class="cancle_add_div">Cancle</div>
                    </div>
                </form>
            </div>

            <% Book.map((e, i)=> { %>
                <div class="book_main <%= e.category %>" data-category="<%= e.category %>">
                    <div class="book_img">
                        <div class="book_edit_delete">
                            <a href="/bookEdit/<%=e.id%>">
                                <button class="edit_book_icon">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </button>
                            </a>
                            <a href="/bookDelete?id=<%=e.id%>">
                                <button class="delete_book_icon" onclick="alert('Your Product Was Delete 🥺🛒...')">
                                    <i class="fa-regular fa-trash-can"></i>
                                </button>
                            </a>
                        </div>
                        <a href=<%=e.pdf %> target="_blank">
                            <img src=<%=e.img%> alt="">
                        </a>
                    </div>
                    <div class="book_text">
                        <h2>
                            <%= e.name%>
                        </h2>
                        <div class="book_author">
                            <p>-<%= e.author%>
                            </p>
                            <h4>
                                <%= e.date%>
                            </h4>
                        </div>
                        <div class="book_flex">
                            <h3>$<%= e.price%>
                            </h3>
                            <div class="star_rating">
                                <% for (let j=1; j <=5; j++) { %>
                                    <i class="fa fa-star <%= j <= e.rate ? 'filled' : '' %>"></i>
                                    <% } %>
                            </div>

                        </div>

                        <form action="/cartAdd" method="POST">
                            <input hidden name="id" value="<%= e.id %>">
                            <input hidden name="name" value="<%= e.name %>">
                            <input hidden name="author" value="<%= e.author %>">
                            <input hidden name="price" value="<%= e.price %>">
                            <input hidden name="rate" value="<%= e.rate %>">
                            <input hidden name="img" value="<%= e.img %>">
                            <input hidden name="quantity" value="<%= e.quantity %>">
                            <button type="submit" onclick="alert('Your Product Was Add to Cart 🛍️🛒... Thanks for your support! ❣️😄')">Purchase Now</button>
                        </form>

                    </div>
                </div>
                <% }) %>
        </div>

        <button class="cart_open_btn">
            <i class="fa-solid fa-cart-plus"></i>
        </button>

        <div class="cart_main">
            <div class="cart_div">
                <div class="cart_btn_div">
                    <button class="cart_close_btn">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>

                <div class="add_cart_main">
                    <% Cart.map((e, i)=> { %>
                        <div class="add_to_cart">
                            <div class="cart_img">
                                <div class="quantity_div">
                                    <button>
                                        <%= e.quantity %>
                                    </button>
                                </div>
                                <a href=<%=e.pdf %> target="_blank">
                                    <img src=<%=e.img%> alt="">
                                </a>
                            </div>
                            <div class="cart_text">
                                <h2>
                                    <%= e.name%>
                                </h2>
                                <div class="cart_author_date">
                                    <p>- <%= e.author%>
                                    </p>
                                    <h4>
                                        <%= e.date%>
                                    </h4>
                                </div>
                                <div class="cart_price_rate">
                                    <h3>$<%= e.price%>
                                    </h3>
                                    <% for (let j=1; j <=5; j++) { %>
                                        <i class="fa fa-star <%= j <= e.rate ? 'filled' : '' %>"></i>
                                        <% } %>
                                </div>
                            </div>
                            <div class="cart_action">
                                <button class="edit_cart" data-id="<%= e.id%>">Edit</button>

                                <a href="/cartDelete?id=<%=e.id%>">
                                    <button class="delete_cart" onclick="alert('Your Product Was Delete 🥺🛒...')">Delete</button>
                                </a>
                            </div>
                        </div>
                        <% }) %>
                </div>


            </div>
        </div>

        <% Cart.map((e, i)=> { %>
            <div class="cart_edit_main" data-id="<%= e.id %>" style="display: none;">
                <form action="/cartEdit/<%= e.id %>" method="POST">
                    <h1>Edit Your Cart Data</h1>

                    <h2>Quantity</h2>
                    <input type="number" name="quantity" value="<%= e.quantity %>" min="1" required>

                    <h2>Rate</h2>
                    <div class="rating">
                        <% for (let j=1; j <=5; j++) { %>
                            <i class="fa fa-star <%= j <= e.rate ? 'gold' : '' %>" data-value="<%= j %>"></i>
                            <% } %>
                    </div>
                    <input type="hidden" name="rate" id="rate" value="<%= e.rate %>">

                    <button type="submit">Save</button>
                </form>
            </div>
            <% }) %>

    </center>
</body>

</html>
<script>
    const cartButton = document.querySelector('.cart_open_btn')
    const cartOverlay = document.querySelector('.cart_main')
    const closeCartButton = document.querySelector('.cart_close_btn')

    // Open Cart Div 
    cartButton.addEventListener('click', () => {
        cartOverlay.style.visibility = 'visible'
        cartOverlay.style.width = '30%'
    })

    // Close Cart Div 
    closeCartButton.addEventListener('click', () => {
        cartOverlay.style.visibility = 'hidden'
        cartOverlay.style.width = '0'
    })

    // document.getElementById('purchaseBtn').addEventListener('click', function () {
    //     alert('Your Product Was Add to Cart 🛍️🛒... Thanks for your support! ❣️😄')
    // })

    // document.getElementById('deleteBtn').addEventListener('click', function () {
    //     alert('Your Product Was Delete 🥺🛒...')
    // })


    document.querySelectorAll(".edit_cart").forEach(editButton => {
        editButton.addEventListener('click', () => {
            const cartId = editButton.getAttribute('data-id')

            // Hide Forms
            document.querySelectorAll(".cart_edit_main").forEach(editSection => {
                editSection.style.display = 'none'
            })

            // Show Forms
            const editSection = document.querySelector(`.cart_edit_main[data-id="${cartId}"]`);
            if (editSection) {
                editSection.style.display = 'block'
                editSection.style.display = 'flex'
                editSection.style.justifyContent = 'center'
                editSection.style.alignItems = 'center'
            }
        })
    })






    document.querySelectorAll(".add_book_btn").forEach(addButton => {
        addButton.addEventListener('click', () => {
            // Hide all forms first
            document.querySelectorAll(".main_add_book").forEach(addSection => {
                addSection.style.display = 'none'
            })

            // Show the form related to the clicked button
            const formToShow = addButton.closest('.new_book_add').nextElementSibling
            if (formToShow && formToShow.classList.contains('main_add_book')) {
                formToShow.style.display = 'flex'
                formToShow.style.justifyContent = 'center'
                formToShow.style.alignItems = 'center'
            }
        })
    })

    let cancle_add_div = document.querySelector('.cancle_add_div')
    let main_add_book = document.querySelector('.main_add_book')

    cancle_add_div.addEventListener('click', () => {
        main_add_book.style.display = 'none'
    })





    document.addEventListener("DOMContentLoaded", () => {
        const stars = document.querySelectorAll(".fa-star")
        const ratingValueInput = document.getElementById("rating-value")
        let currentRating = 0

        stars.forEach((star) => {
            star.addEventListener("click", () => {
                const selectedRating = parseInt(star.getAttribute("data-value"))

                if (currentRating === selectedRating) {
                    currentRating = 0
                    ratingValueInput.value = ""
                } else {
                    currentRating = selectedRating
                    ratingValueInput.value = currentRating
                }

                stars.forEach((s, index) => {
                    if (index < currentRating) {
                        s.classList.add("gold")
                    } else {
                        s.classList.remove("gold")
                    }
                });
            });
        });
    });





    document.addEventListener("DOMContentLoaded", () => {
        const cartEditMain = document.querySelector(".cart_edit_main")

        if (cartEditMain) {
            const stars = cartEditMain.querySelectorAll(".rating .fa-star")
            const rateInput = cartEditMain.querySelector("#rate")

            const updateStars = (rating) => {
                stars.forEach((star) => {
                    const value = parseInt(star.getAttribute("data-value"))
                    if (value <= rating) {
                        star.classList.add("gold")
                    }
                    else {
                        star.classList.remove("gold")
                    }
                })
            }

            let currentRating = parseInt(rateInput.value || "0")
            updateStars(currentRating)

            stars.forEach((star) => {
                star.addEventListener("click", () => {
                    const clickedValue = parseInt(star.getAttribute("data-value"))

                    if (currentRating === clickedValue) {
                        currentRating = clickedValue - 1
                    }
                    else {
                        currentRating = clickedValue
                    }

                    rateInput.value = currentRating
                    updateStars(currentRating)
                })
            })
        }
    })





    function filterBooks(category, btn) {
        let books = document.querySelectorAll('.book_main')
        books.forEach(book => {
            if (category === 'all' || book.dataset.category === category) {
                book.style.display = 'block'
            } else {
                book.style.display = 'none'
            }
        })

        const buttons = document.querySelectorAll('.nav_btn button')
        buttons.forEach(button => button.classList.remove('active'))
        btn.classList.add('active')
    }



</script>